<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Booklet - jQuery Plugin</title>
    <link href="../booklet/jquery.booklet.latest.css" type="text/css" rel="stylesheet" media="screen, projection, tv" />
    <style type="text/css">
		body {background:#ccc; font:normal 12px/1.2 arial, verdana, sans-serif;}
        input, textarea {background-color:#fff; border:2px inset;}
        #display {width:400px; height:150px; margin:0 auto;}
		#controls {float:left; width:300px;}
		#content {margin-left:400px;}
        #options-list li {clear:both; line-height:23px;}
        #options-list li input {float:right;}
        #mybook .b-page div {padding:10px 20px;}
    </style>
</head>
<body>
	<header>
		<h1>Kitchen Sink</h1>
		<div class="clear"></div>
	</header>
	<aside id="controls">
    	<h3>Top Level Methods</h3>
		<ul>
	    	<li><a href="#" id="custom-destroy">Destroy</a></li>
	    	<li><a href="#" id="custom-create">Create</a></li>
	    	<li><a href="#" id="custom-enable">Enable</a></li>
	    	<li><a href="#" id="custom-disable">Disable</a></li>
	    </ul>
		<h3>Navigation Methods</h3>
		<ul>
	    	<li><a href="#" id="custom-next">Next page</a></li>
	    	<li><a href="#" id="custom-prev">Previous page</a></li>
	    	<li><a href="#" id="custom-gotopage">Go to page:</a>
                <label>
                    <select id="gotoIndex">
                        <option value="start">start</option>
                        <option value="end">end</option>
                    </select>
                </label>
			</li>
	    </ul>
	    <h3>Add / Remove Pages</h3>
        <ul>
            <li><a href="#" id="custom-add-index">Add a New Page, at:</a>
                <label>
                    <select id="addIndex">
                        <option value="start">start</option>
                        <option value="end">end</option>
                    </select>
                </label>
			</li>
	    	<li><a href="#" id="custom-remove-index">Remove Page, at:</a>
                <label>
                    <select id="removeIndex">
                        <option value="start">start</option>
                        <option value="end">end</option>
                    </select>
                </label>
			</li>
	    </ul>
	    <h3>Update Option(s)</h3>
		<div id="options-wrapper">
			<ul id="options-list">
		    	<li></li>
		    </ul>
		</div>
	</aside>
	<section id="content" class="sub-content">
		<a href="#" id="custom-update-options">Update Options</a>
		<a href="#" id="custom-reset-options">Reset Options</a>
		<h3>Command Output</h3>
        <label>
		    <textarea id="display"></textarea>
        </label>
	    <div id="mybook">
            <div>
                <h3>Page 1</h3>
            </div>
            <div>
                <h3>Page 2</h3>
            </div>
            <div>
                <h3>Page 3</h3>
            </div>
            <div>
                <h3>Page 4</h3>
            </div>
            <div>
                <h3>Page 5</h3>
            </div>
            <div>
                <h3>Page 6</h3>
            </div>
            <div>
                <h3>Page 7</h3>
            </div>
            <div>
                <h3>Page 8</h3>
            </div>
	    </div>
	</section>
	<footer></footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
	<script> window.jQuery || document.write('<script src="../booklet/jquery-2.1.0.min.js"><\/script>') </script>
    <script src="../booklet/jquery.transit.min.js"></script>
    <script src="../booklet/jquery.easing.1.3.js"></script>
    <script src="../booklet/jquery.booklet.latest.js"></script>
	<script type="text/javascript">
	    $(function () {

            var updateSelect = function (event, data) {
                console.log(event, data);

                var pageTotal = data.info.pageTotal;
                var selectIndices = $('#gotoIndex, #addIndex, #removeIndex');
                selectIndices.children().remove();
                selectIndices.append('<option value="start">start</option><option value="end">end</option>');
                for(var i = 0; i < pageTotal; i++) {
                    selectIndices.append('<option value="'+ i +'">'+ i +'</option>');
                }
            };
			
			var options = $.extend({}, $.fn.booklet.defaults, {
                width:800
			});
			var updateOptions = function () {
                var optionsList = $('#options-list');
                optionsList.children().remove();
				$.each(options, function(key, value){
                    if (typeof value === 'function' || value === null) {
                        if (value === null)
                            optionsList.append('<li>'+key+': null</li>');
                        else
                            optionsList.append('<li>'+key+': <pre><code>'+value+'</code></pre></li>');
                        return;
                    }
                    optionsList.append('<li>'+key+' <input value="'+value+'" id="option-'+key+'" /></li>');
					$('#option-'+key).on('change', function(e){
						e.preventDefault();
						var value = $(this).val();

                        if (value == "false"){
                            options[key] = false;
                            return;
                        }
                        if (value == "true"){
                            options[key] = true;
                            return;
                        }
						var intValue = parseInt(value);
						if(!isNaN(intValue)) {
							options[key] = intValue;
							return;
						}

						options[key] = value;
					});
				});
			};
			updateOptions();
			
			var config = $.extend({}, options, {
				create: updateSelect,
                willchange: function (event, data){
                    console.log(event, data);
                },
                startchange: function (event, data){
                    console.log(event, data);
                },
                didchange: function (event, data){
                    console.log(event, data);
                },
                add: updateSelect,
				remove: updateSelect
			});
	        var mybook = $("#mybook").booklet(config);

			// New Page Default HTML
	
			var newPageCount = 0;
	        var newPageHtml = function() {
				newPageCount++;
				return "<div>New Page \#"+newPageCount+"</div>";
			};
			
			// Display
			
	        var display = $("#display");
			var updateDisplay = function(message) {
				display.text(message + '\r\n' + display.text());
			};
	
			// Demo Actions
	
	        $('#custom-destroy').click(function (e) {
	            e.preventDefault();
	            $("#mybook").booklet("destroy");
	            updateDisplay('$("#mybook").booklet("destroy")');
	        });

	        $('#custom-create').click(function (e) {
	            e.preventDefault();
	            $("#mybook").booklet(config);
	            updateDisplay('$("#mybook").booklet();');
	        });

	        $('#custom-disable').click(function (e) {
	            e.preventDefault();
	            $("#mybook").booklet("disable");
	            updateDisplay('$("#mybook").booklet("disable")');
	        });

	        $('#custom-enable').click(function (e) {
	            e.preventDefault();
	            $("#mybook").booklet("enable");
	            updateDisplay('$("#mybook").booklet("enable")');
	        });

	        $('#custom-next').click(function (e) {
	            e.preventDefault();
	            $("#mybook").booklet("next");
				updateDisplay('$("#mybook").booklet("next");');
	        });

	        $('#custom-prev').click(function (e) {
	            e.preventDefault();
	            $("#mybook").booklet("prev");
				updateDisplay('$("#mybook").booklet("prev");');
	        });

	        $('#custom-gotopage').click(function (e) {
	            e.preventDefault();
				var index = $('#gotoIndex').val();
	            $("#mybook").booklet("gotopage", index);
				updateDisplay('$("#mybook").booklet("gotopage", '+(index == "start" || index == "end" ? '"'+index+'"' : index)+');');
	        });

            $('#gotoIndex').on('change', function(e){
                e.preventDefault();
                $('#custom-gotopage').click();
            });

            $('#custom-add-index').click(function (e) {
	            e.preventDefault();
				var newPage = newPageHtml();
				var index = $('#addIndex').val();
	            $("#mybook").booklet("add", index, newPage);
				updateDisplay('$("#mybook").booklet("add", '+ (index == "start" || index == "end" ? '"'+index+'"' : index) +', "'+ newPage +'");');
	        });
	
	        $('#custom-remove-index').click(function (e) {
	            e.preventDefault();
				var index = $('#removeIndex').val();
	            $("#mybook").booklet("remove", index);
				updateDisplay('$("#mybook").booklet("remove", '+ (index == "start" || index == "end" ? '"'+index+'"' : index) +');');
	        });

	        $('#custom-update-options').click(function (e) {
	            e.preventDefault();
				$("#mybook").booklet("option", options);
				updateDisplay('$("#mybook").booklet("option", '+ options +');');
	        });
	
	        $('#custom-reset-options').click(function (e) {
	            e.preventDefault();
				$("#mybook").booklet("option", config);
                options = config;
				updateDisplay('$("#mybook").booklet("option", '+ config +');');
				updateOptions();
	        });

	    });
    </script>
</body>
</html>